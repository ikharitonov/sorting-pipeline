<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrode Selector</title>
    <style>
        #plot-container {
            position: relative;
        }

        .electrode {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #3498db;
            cursor: pointer;
        }

        .selected {
            background-color: #e74c3c;
        }
    </style>
</head>
<body>
    <input type="file" id="fileInput" accept=".json" />
    <div id="plot-container"></div>

    <script>
        document.getElementById('fileInput').addEventListener('change', handleFileSelect);

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                const electrodeData = JSON.parse(e.target.result);
                createPlot(electrodeData);
            };
            reader.readAsText(file);
        }

        function createPlot(electrodeData) {
            const plotContainer = document.getElementById('plot-container');
            plotContainer.innerHTML = ''; // Clear previous content

            electrodeData.forEach((electrode, index) => {
                const electrodeElement = document.createElement('div');
                electrodeElement.className = 'electrode';
                electrodeElement.style.left = electrode.x + 'px';
                electrodeElement.style.top = electrode.y + 'px';
                electrodeElement.setAttribute('data-index', index);

                electrodeElement.addEventListener('click', handleElectrodeClick);

                plotContainer.appendChild(electrodeElement);
            });
        }

        function handleElectrodeClick(event) {
            const electrodeElement = event.target;
            const index = electrodeElement.getAttribute('data-index');

            if (electrodeElement.classList.contains('selected')) {
                electrodeElement.classList.remove('selected');
                // TODO: Remove index from your selected list or perform other actions
            } else {
                electrodeElement.classList.add('selected');
                // TODO: Add index to your selected list or perform other actions
            }
        }
    </script>
</body>
</html>
